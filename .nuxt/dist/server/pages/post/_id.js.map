{"version":3,"file":"pages/post/_id.js","sources":["webpack:///./helper/schema.js","webpack:///./pages/post/_id.vue?5185","webpack:///./pages/post/_id.vue","webpack:///./pages/post/_id.vue?0281","webpack:///./pages/post/_id.vue?860e"],"sourcesContent":["export const post_detail = [\n    \"id\",\n    \"pid\",\n    \"title\",\n    \"slug\",\n    \"description\",\n    \"content\",\n    \"created\",\n    {\n        \"media\": [\n            \"id\",\n            \"title\",\n            \"sizes\"\n        ]\n    },\n    {\n        \"medias\": [\n            \"id\",\n            \"title\",\n            \"sizes\"\n        ]\n    },\n    {\n        \"post_related\": [\n            \"title\",\n            \"slug\",\n            \"post_type\",\n            \"content\"\n        ]\n    },\n    {\n        \"related\": [\n            \"title\",\n            \"pid\",\n            \"slug\",\n            \"created\",\n            {\n                \"media\": [\n                    \"id\",\n                    \"title\",\n                    \"sizes\"\n                ]\n            },\n            {\n                \"medias\": [\n                    \"id\",\n                    \"title\",\n                    \"sizes\"\n                ]\n            },\n        ]\n    },\n    \"meta\",\n    \"options\",\n    {\n        \"post_parent\": [\n            \"meta\"\n        ]\n    },\n    {\n        \"terms\": [\n            \"id\",\n            \"taxonomy\",\n            {\n                \"term\": [\n                    \"title\",\n                    \"slug\"\n                ]\n            }\n        ]\n    },\n    \"user\",\n    \"post_type\",\n    \"next\",\n    \"previous\"\n]\nexport const post_list = [\n    \"id\",\n    \"pid\",\n    \"title\",\n    \"slug\",\n    \"created\",\n    {\n        \"media\": [\n            \"title\",\n            \"sizes\"\n        ]\n    },\n    {\n        \"medias\": [\n            \"id\",\n            \"title\",\n            \"sizes\"\n        ]\n    },\n    {\n        \"meta\": [\n            \"source\"\n        ]\n    },\n    \"user\"\n]\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.ui)?_c('div',[_vm._ssrNode(\"<section class=\\\"hero\\\">\",\"</section>\",[_vm._ssrNode(\"<div class=\\\"hero-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container small\\\">\",\"</div>\",[_vm._ssrNode(\"<h1 class=\\\"title\\\">\"+_vm._ssrEscape(_vm._s(_vm.ui.title))+\"</h1> <p class=\\\"subtitle\\\">\"+_vm._ssrEscape(_vm._s(_vm.ui.short_description))+\"</p> \"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"credit:\\n                    \"),_c('n-link',{attrs:{\"to\":(\"/profile/\" + (_vm.ui.meta.author))}},[_vm._v(_vm._s(_vm.ui.meta.author))])],2)],2),_vm._ssrNode(\" <div class=\\\"container media-show\\\"><div class=\\\"columns\\\"><div class=\\\"column has-text-centered\\\"><div class=\\\"image\\\"><img\"+(_vm._ssrAttr(\"src\",_vm.ui.medias[_vm.index].sizes['full_size']))+(_vm._ssrAttr(\"alt\",_vm.ui.medias[_vm.index].title))+\"></div></div> <div class=\\\"column is-3\\\"><div class=\\\"columns is-mobile is-multiline\\\">\"+(_vm._ssrList((_vm.ui.medias),function(media,i){return (\"<div class=\\\"column is-6\\\"><div class=\\\"clickable\\\"><div class=\\\"image\\\"><img\"+(_vm._ssrAttr(\"src\",media.sizes['thumb_247_247']))+(_vm._ssrAttr(\"alt\",media.title))+\"></div></div></div>\")}))+\"</div></div></div></div> \"),_vm._ssrNode(\"<div class=\\\"container small\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"buttons\\\" style=\\\"justify-content: center;\\\">\",\"</div>\",[(_vm.ui['vote_object'])?_vm._ssrNode(\"<div\"+(_vm._ssrClass(\"button is-medium\",{'is-success': _vm.ui['vote_object'].is_voted}))+\">\",\"</div>\",[_c('b-icon',{attrs:{\"icon\":\"heart\"}}),_vm._ssrNode(\" <span>\"+_vm._ssrEscape(_vm._s(_vm.ui['vote_object'].total))+\"</span>\")],2):_vm._e(),_vm._ssrNode(\" \"+((_vm.ui['meta'] && _vm.ui['meta']['view_count'])?(\"<div class=\\\"button is-text\\\">\"+_vm._ssrEscape(\"\\n                        \"+_vm._s(_vm.ui['meta']['view_count'])+\" views\\n                    \")+\"</div>\"):\"<!---->\")+\" \"),(_vm.ui['meta'] && _vm.ui['meta']['source_url'])?_vm._ssrNode(\"<a\"+(_vm._ssrAttr(\"href\",_vm.ui['meta']['source_url']))+\" target=\\\"_blank\\\" class=\\\"button is-text is-small\\\">\",\"</a>\",[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"link\"}})],1):_vm._e()],2),_vm._ssrNode(\" \"),(_vm.updating)?_c('b-field',{attrs:{\"label\":\"Add some tags\",\"label-position\":\"on-border\"}},[_c('field-data',{attrs:{\"module\":\"hash_tag\",\"multiple\":\"\",\"icon\":\"label\"},model:{value:(_vm.ui.hash_tags),callback:function ($$v) {_vm.$set(_vm.ui, \"hash_tags\", $$v)},expression:\"ui.hash_tags\"}})],1):_c('div',{staticClass:\"tags\",staticStyle:{\"justify-content\":\"center\"}},_vm._l((_vm.ui.terms),function(t){return _c('n-link',{key:t.id,staticClass:\"tag is-medium\",attrs:{\"to\":(\"/\" + (t['term']['slug']))}},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"label\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(t['term']['title']))])],1)}),1),_vm._ssrNode(\" \"+((_vm.currentUser && _vm.currentUser.username === 'lam')?(\"<div class=\\\"buttons\\\" style=\\\"justify-content: center\\\">\"+((_vm.updating)?(\"<div class=\\\"button\\\">Save</div>\"):\"<!---->\")+\" <div class=\\\"button is-text\\\">\"+_vm._ssrEscape(_vm._s(_vm.updating ? 'Cancel' : 'Update')+\"\\n                    \")+\"</div></div>\"):\"<!---->\")+\" \"),_vm._ssrNode(\"<div class=\\\"buttons\\\" style=\\\"justify-content: center;\\\">\",\"</div>\",[(_vm.ui.previous)?_c('n-link',{staticClass:\"button is-large\",attrs:{\"to\":(\"/post/\" + (_vm.ui.previous.pid))}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\"}})],1):_vm._e(),_vm._ssrNode(\" \"),(_vm.ui.next)?_c('n-link',{staticClass:\"button is-large\",attrs:{\"to\":(\"/post/\" + (_vm.ui.next.pid))}},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\"}})],1):_vm._e()],2)],2)],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<section class=\\\"hero is-light\\\">\",\"</section>\",[_vm._ssrNode(\"<div class=\\\"hero-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container small\\\">\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"widget_title\\\">Response</h4> \"),_c('comment-form',{attrs:{\"ui\":_vm.ui,\"parent\":_vm.commentParent},on:{\"posted\":function($event){return _vm.fetch()}}},[(_vm.commentParent)?_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"button\",on:{\"click\":function($event){_vm.commentParent = null}}},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"window-close\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Replying \"+_vm._s(_vm.convertName(_vm.commentParent.user)))])],1)]):_vm._e()]),_vm._ssrNode(\" \"),_vm._l((_vm.response.results),function(comment){return _c('comment',{key:comment.id,attrs:{\"ui\":_vm.ui,\"value\":comment,\"avatar-size\":\"is-24x24\"},on:{\"reply\":_vm.reply}})})],2)])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<section class=\\\"hero\\\">\",\"</section>\",[_vm._ssrNode(\"<div class=\\\"hero-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container\\\">\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"widget_title\\\">RELATED UI</h4> \"),(_vm.ui.related)?_vm._ssrNode(\"<div class=\\\"columns is-multiline\\\">\",\"</div>\",_vm._l((_vm.ui.related),function(u,i){return _vm._ssrNode(\"<div class=\\\"column is-3\\\">\",\"</div>\",[_c('ui',{attrs:{\"value\":u}})],1)}),0):_vm._e()],2)])])],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as schema from \"@/helper/schema\";\n\nexport default {\n    name: \"PostDetail\",\n    async fetch() {\n        this.ui = await this.$axios.$post(`uihunt.com/posts/${this.$route.params.id}/`, {\n            schema: schema.post_detail\n        }, {\n            params: {\n                force: this.$route.query.force,\n                uid: true\n            }\n        });\n    },\n    data() {\n        return {\n            ui: null,\n            index: 0,\n            commentParent: null,\n            updating: false,\n            response: {\n                results: [],\n                count: 0\n            }\n        }\n    },\n    head() {\n        return {\n            title: this.ui ? this.ui.title : 'UIHunt',\n            meta: [\n                {\n                    hid: 'description',\n                    name: 'description',\n                    content: this.ui ? this.ui.description : null\n                }\n            ]\n        }\n    },\n    methods: {\n        vote() {\n            if (this.currentUser) {\n                this.$api.ui.vote(this.ui.id, {}).then(res => {\n                    this.ui[\"vote_object\"].is_voted = res;\n                    if (res) {\n                        this.ui[\"vote_object\"]['vote_count']++;\n                    } else {\n                        this.ui[\"vote_object\"]['vote_count']--\n                    }\n                })\n            } else {\n                this.$buefy.toast.open({\n                    message: 'Login required!',\n                    type: 'is-warning'\n                })\n            }\n        },\n        reply(comment) {\n            this.commentParent = comment;\n        },\n        async fetch() {\n            this.response.results = [];\n            this.response = await this.$api.comment.list({\n                ui: this.ui.id\n            })\n        },\n        submit() {\n            this.$api.ui.update(this.ui.id, {\n                hash_tags: this.ui.hash_tags.map(x => x.id)\n            })\n        }\n    },\n    mounted() {\n        this.toTop();\n    },\n    watch: {\n        $route(to, from) {\n            this.toTop();\n        },\n        \"$route.params.id\"() {\n            this.$fetch();\n        }\n    }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=36a869bb&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"4b34f3ce\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AASA;AADA;AAQA;AADA;AAQA;AADA;AASA;AAMA;AADA;AAQA;AADA;AAbA;AAyBA;AADA;AAMA;AAIA;AADA;AAJA;AAiBA;AAOA;AADA;AAOA;AADA;AAQA;AADA;;;;;;;;;;;;AC/FA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AAFA;AADA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AALA;AAUA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAHA;AAUA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAhCA;AACA;AAgCA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AAxEA;;AC5GA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}